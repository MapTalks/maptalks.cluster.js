<!DOCTYPE html>
<html>
<head>
    <title>maptalks.markercluster demo</title>
    <!--<link type="text/css" rel="stylesheet" href="https://unpkg.com/maptalks@<2.0.0/dist/maptalks.css">
    <script type="text/javascript" src="https://unpkg.com/maptalks@<2.0.0/dist/maptalks.min.js"></script>-->
    <link href="../node_modules/maptalks/dist/maptalks.css" rel="stylesheet" />
    <script src="../node_modules/maptalks/dist/maptalks.js"></script>
    <script type="text/javascript" src="../dist/maptalks.markercluster.js"></script>
    <script type="text/javascript" src="realworld.50000.1.js"></script>
    <script type="text/javascript" src="realworld.50000.2.js"></script>
    <style> 
        html,body{
            margin:0px;
            height: 100%;
            width: 100%;
        }
        #map {
            width: 100%;
            height:100%;
        }
    </style>
</head>
<body>
<div id="map"></div>
<script type="text/javascript" >
    //This demos is inspired by Leaflet.MarkerCluster
    //https://github.com/Leaflet/Leaflet.markercluster

    var map = new maptalks.Map("map",{
        center:   [175.27, -37.79],
        zoom   :  10,
        attributionControl : {
          'content' : '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'
        },
        baseLayer : new maptalks.TileLayer('tile',{
            'urlTemplate' : 'http://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}.png',
            'subdomains'  : ['a','b','c','d','e']
        })
    });

    var markers = [];
    // data from realworld.50000.1.js
    for (var i = 0; i < addressPoints.length; i++) {
        var a = addressPoints[i];
        markers.push(new maptalks.Marker([a[1], a[0]]));
    }
    // data from realworld.50000.2.js
    for (var i = 0; i < addressPoints2.length; i++) {
        var a = addressPoints2[i];
        markers.push(new maptalks.Marker([a[1], a[0]]));
    }

    var clusterLayer = new maptalks.ClusterLayer('cluster', markers, {
        'forceRenderOnZooming' : true,
        'maxClusterZoom' : 16,
        //"count" is an internal variable: marker count in the cluster.
        'symbol': {
            'markerType': 'ellipse',
            'markerFill': { property: 'count', type: 'interval', stops: [[0, '#00F5FF'], [9, '#98FB98'], [99, '#EEEE00'], [300, '#FF6EB4']] },
            'markerFillOpacity': 0.9,
            'markerLineOpacity': 0.3,
            'markerLineWidth': 10,
            'markerLineColor': { property: 'count', type: 'interval', stops: [[0, '#00F5FF'], [9, '#98FB98'], [99, '#EEEE00'], [300, '#FF6EB4']] },
            'markerWidth': { property: 'count', type: 'interval', stops: [[0, 25], [9, 30], [99, 35], [500, 40]] },
            'markerHeight': { property: 'count', type: 'interval', stops: [[0, 25], [9, 30], [99, 35], [500, 40]] }
        },
        'drawClusterText': true,
        'single': true
    });

    map.addLayer(clusterLayer);

    map.on('click', function (e) {
        if (console) {
            console.log(clusterLayer.identify(e.coordinate));
        }
    });
</script>
</body>
</html>
